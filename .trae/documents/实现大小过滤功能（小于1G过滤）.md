## 设计目标

1. 搜索时默认只显示夸克网盘资源
2. 其他网盘需要手动开启筛选
3. 小于1GB的夸克资源自动过滤

## 实现方案

### 1. 修改搜索默认行为

修改 `quark_strm/app/services/search_service.py`:
- 默认 `cloud_types=["quark"]`
- 添加 `min_file_size` 参数（默认1GB）

### 2. 异步获取文件大小

创建 `quark_strm/app/services/quark_size_fetcher.py`:
- 使用 quark_sdk 获取分享详情
- 批量并发获取（限制并发数避免限流）
- 使用缓存避免重复请求

### 3. 大小过滤逻辑

在 `search_service.py` 中:
- 对夸克资源异步获取大小
- 过滤小于 min_file_size 的资源
- 将大小信息添加到结果中

### 4. 修改前端默认筛选

修改 `quark_strm/web/src/views/SearchView.vue`:
- 默认只选中"夸克网盘"
- 其他网盘选项默认不选中

### 5. 修改API接口

修改 `quark_strm/app/api/search.py`:
- 添加 `min_file_size` 查询参数

## 文件修改列表

| 文件 | 修改内容 |
|------|---------|
| `app/services/quark_size_fetcher.py` | 新增：夸克文件大小获取器 |
| `app/services/search_service.py` | 修改：默认夸克+大小过滤 |
| `app/api/search.py` | 修改：添加 min_file_size 参数 |
| `web/src/views/SearchView.vue` | 修改：默认只选夸克 |

## 技术细节

### 大小获取流程
1. 搜索返回夸克资源列表
2. 提取所有夸克分享链接
3. 批量并发调用 `get_by_key()` 获取详情
4. 计算每个分享的总大小
5. 过滤小于1GB的资源
6. 将大小信息缓存（TTL: 1小时）

### 缓存策略
- 使用内存缓存（LRU）
- 缓存键: share_key
- 缓存值: total_size
- TTL: 3600秒

请确认是否执行？