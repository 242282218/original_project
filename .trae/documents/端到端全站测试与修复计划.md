## 端到端全站测试与修复计划

### 🤖 执行 Agent
**DevOps Agent（运维者）**

### 📋 前置条件检查（已完成）
- ✅ 已读取 `ai/rules/agent.md`
- ✅ 已读取 `ai/runner.md`
- ✅ 已读取 `ai/state/plan.md`

### 📊 项目结构
| 组件 | 技术栈 | 路径 |
|------|--------|------|
| 后端 | FastAPI (Python 3.11+) | `quark_strm/app/main.py` |
| 前端 | Vue 3 + Vite | `quark_strm/web/` |
| 配置 | YAML | `quark_strm/config.yaml` |

### 🚀 执行阶段

#### Phase A: 环境与结构扫描
1. 检查 Python/Node.js 环境版本
2. 确认项目结构完整性
3. 检查依赖文件存在性

#### Phase B: 后端测试 → 修复 → 复测
1. 安装 Python 依赖 (`pip install -r requirements.txt`)
2. 启动后端服务 (`uvicorn app.main:app --port 8000`)
3. 捕获 stderr/error 并修复
4. 循环直到：可启动 + 无运行期 error

#### Phase C: 前端测试 → 修复 → 复测
1. 安装 Node 依赖 (`npm install`)
2. 启动前端服务 (`npm run dev`)
3. 使用 Playwright 打开页面
4. 捕获 console error 并修复
5. 循环直到：页面可渲染 + console 无 error

#### Phase D: 前后端联通修复
1. 检查前端 API baseURL 配置
2. 检查后端 CORS 配置
3. 测试接口调用
4. 修复路径/端口问题

#### Phase E: 构建与配置修复
1. 执行前端 build 验证
2. 检查环境变量配置
3. 验证修复有效

### 📤 最终输出
- 【修复记录】详细列出所有修改
- 【剩余未修复问题】标记需人工决策的问题
- 【最终测试结论】通过/未通过状态

### ⚠️ 约束
- 禁止一次性大量修改
- 每次修改后必须复测
- 不确定的问题标记 FAIL 等待人工决策